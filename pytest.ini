[pytest]
testpaths = tests

env =
    # Core runtime mode
    APP_MODE = test
    ENVIRONMENT = test
    LOG_LEVEL = INFO

    # --- OpenAI / SDK wiring ---
    # Use the same dummy key everywhere so the SDK and relay agree.
    OPENAI_API_KEY = dummy
    OPENAI_ORG = org_dummy

    # Where the OpenAI *SDK* points for tests.
    # This is your relay, not api.openai.com.
    OPENAI_BASE_URL = http://127.0.0.1:8000/v1

    # Where the relay forwards to when talking to OpenAI.
    OPENAI_API_BASE = https://api.openai.com/v1

    # --- Relay auth ---
    # MUST match what the relay expects for Authorization: Bearer <token>
    RELAY_KEY = dummy
    RELAY_AUTH_ENABLED = true
    RELAY_NAME = ChatGPT Team Relay (local dev)

    # --- Models / defaults ---
    DEFAULT_MODEL = gpt-4o-mini

    # --- Validation / tools (paths can be adjusted to your project layout) ---
    VALIDATION_SCHEMA_PATH = schemas/openai.yaml
    TOOLS_MANIFEST = schemas/tools-manifest.json

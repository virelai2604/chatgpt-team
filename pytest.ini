[pytest]
# ===========================
# ChatGPT Team Relay Pytest Config
# ===========================
# Enables asyncio support for FastAPI testing
asyncio_mode = auto

# Test discovery
testpaths = tests
python_files = test_*.py

# Logging output
log_cli = true
log_cli_level = INFO
log_format = %(asctime)s [%(levelname)s] %(message)s
log_date_format = %Y-%m-%d %H:%M:%S

# Display summary on skipped and xfailed tests
addopts = 
    -ra
    --disable-warnings
    --maxfail=2
    -q

# Warnings management
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning

# Environment variable defaults (for isolated test mode)
env =
    OPENAI_API_KEY=dummy-test-key
    OPENAI_API_BASE=https://api.openai.com/v1
    RELAY_DEBUG=true
    PYTHONASYNCIODEBUG=1

# Markers for test categorization
markers =
    smoke: basic relay health tests
    integration: OpenAI passthrough verification
    actions: ChatGPT Actions route tests
    tools: manifest and tool list tests

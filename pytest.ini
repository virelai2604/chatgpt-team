[pytest]
asyncio_mode = auto
log_cli = true
log_cli_level = INFO

# By default, don't run heavy E2E/integration tests.
addopts = -m "not integration"

markers =
    integration: high-level E2E tests that hit a running relay and upstream APIs

env =
    # Dummy upstream creds – tests stub or mock all OpenAI calls.
    OPENAI_API_KEY = dummy-openai-key-for-tests

    # Modern default model, aligned with the API reference.
    DEFAULT_MODEL = gpt-5.1

    # Upstream OpenAI base – tests either stub httpx or don't actually hit this.
    OPENAI_API_BASE = https://api.openai.com/v1
    OPENAI_ASSISTANTS_BASE = https://api.openai.com/v1

    # IMPORTANT: for unit tests we keep relay auth disabled by default and
    # only enable it explicitly in auth-specific tests.
    RELAY_AUTH_ENABLED = false
    RELAY_KEY = dummy-test-relay-key

    APP_MODE = development
    ENVIRONMENT = development

    # Validation + tools configuration
    TOOLS_MANIFEST = app/manifests/tools_manifest.json
    VALIDATION_SCHEMA_PATH = ChatGPT-API_reference_ground_truth-2025-10-29.pdf

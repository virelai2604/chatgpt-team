openapi: 3.1.0
info:
  title: ChatGPT Team Relay API
  description: >
    Clean Ground Truth edition of the ChatGPT Team Relay API.
    Mirrors OpenAI's 2025.10 specification with realtime, multimodal,
    file, and vector store support.
  version: "2025.10"
servers:
  - url: https://chatgpt-team-relay.onrender.com
    description: Production Relay Endpoint

paths:

  /v1/models:
    get:
      summary: List available models
      description: Returns all supported models, including realtime-capable ones.
      tags: [Models]
      operationId: listModels
      responses:
        '200':
          description: Successful Response

  /v1/files:
    get:
      summary: List uploaded files
      description: Lists all files uploaded under the current API key.
      tags: [Files]
      operationId: listFiles
      responses:
        '200':
          description: Successful Response
    post:
      summary: Upload a new file
      description: Uploads a file for later use by models or tools.
      tags: [Files]
      operationId: uploadFile
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Successful Response

  /v1/files/{file_id}:
    get:
      summary: Retrieve file metadata
      description: Returns metadata for a specific uploaded file.
      tags: [Files]
      operationId: getFile
      parameters:
        - name: file_id
          in: path
          required: true
          schema: { type: string }
    delete:
      summary: Delete a file
      description: Permanently removes a file from the system.
      tags: [Files]
      operationId: deleteFile
      parameters:
        - name: file_id
          in: path
          required: true
          schema: { type: string }

  /v1/vector_stores:
    get:
      summary: List vector stores
      description: Returns a list of vector stores.
      tags: [Vector Stores]
      operationId: listVectorStores
    post:
      summary: Create vector store
      description: Creates a new vector store for embeddings or RAG.
      tags: [Vector Stores]
      operationId: createVectorStore

  /v1/vector_stores/{store_id}:
    get:
      summary: Retrieve vector store metadata
      description: Returns details for a specific vector store.
      tags: [Vector Stores]
      operationId: getVectorStore
      parameters:
        - name: store_id
          in: path
          required: true
          schema: { type: string }
    patch:
      summary: Update vector store
      description: Updates the attributes of a vector store.
      tags: [Vector Stores]
      operationId: updateVectorStore
    delete:
      summary: Delete vector store
      description: Permanently deletes a vector store.
      tags: [Vector Stores]
      operationId: deleteVectorStore
      parameters:
        - name: store_id
          in: path
          required: true
          schema: { type: string }

  /v1/responses:
    post:
      summary: Create model response
      description: >
        Generates a model output using GPT or other models.
        Replaces legacy /chat/completions and /completions endpoints.
      tags: [Responses]
      operationId: createResponse
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model:
                  type: string
                  description: Model ID to use for generation.
                input:
                  description: >
                    The input to send to the model â€” either a simple string prompt
                    or an array of input content blocks (text, images, etc.).
                  oneOf:
                    - type: string
                      example: "Write a haiku about electrons."
                    - type: array
                      items:
                        type: object
                        description: Input content block
                        properties:
                          role:
                            type: string
                            example: "user"
                          content:
                            type: array
                            items:
                              type: object
                              description: A content item (text, image, etc.)
                              properties:
                                type:
                                  type: string
                                  enum: [text, image]
                                text:
                                  type: string
                                  example: "Describe the photo."
                                image_url:
                                  type: string
                                  example: "data:image/png;base64,iVBOR..."
                stream:
                  type: boolean
                  description: >
                    If true, the response is streamed back via SSE.
                  example: false
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  object:
                    type: string
                  output:
                    type: string
                    description: Generated text or structured output.

  /v1/responses/tools/{tool_name}:
    post:
      summary: Invoke a registered tool
      description: Executes a relay tool (function calling).
      tags: [Responses]
      operationId: invokeTool
      parameters:
        - name: tool_name
          in: path
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                arguments:
                  type: object
      responses:
        '200':
          description: Tool executed successfully

  /v1/realtime/sessions:
    post:
      summary: Create realtime session
      description: >
        Creates a new realtime session configuration for GPT-4o models.
        Returns session ID, secret, and WebSocket URL.
      tags: [Realtime]
      operationId: createRealtimeSession
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model: { type: string, example: gpt-4o-realtime-preview }
                voice: { type: string, example: verse }
                modalities:
                  type: array
                  items: { type: string }
                expires_in: { type: integer, example: 3600 }

  /v1/realtime/models:
    get:
      summary: List realtime models
      description: Returns all realtime-capable models supported by the relay.
      tags: [Realtime]
      operationId: listRealtimeModels
      responses:
        '200':
          description: Successful Response

  /v1/realtime/events:
    post:
      summary: Send realtime event
      description: >
        Sends a realtime event (text, audio, or image) to an active session.
      tags: [Realtime]
      operationId: sendRealtimeEvent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                session_id: { type: string }
                type:
                  type: string
                  enum:
                    - input_audio_buffer.append
                    - input_image.append
                    - response.create
                data: { type: string }
    get:
      summary: Stream realtime events (SSE)
      description: >
        Streams realtime model output and session events using Server-Sent Events.
      tags: [Realtime]
      operationId: streamRealtimeEvents
      responses:
        '200':
          description: Successful SSE stream

  /v1/{path}:
    get:
      summary: Passthrough proxy (GET)
      description: Fallback route that forwards GET requests to OpenAI upstream.
      tags: [Passthrough]
      operationId: passthroughGet
    post:
      summary: Passthrough proxy (POST)
      description: Fallback route that forwards POST requests to OpenAI upstream.
      tags: [Passthrough]
      operationId: passthroughPost
    put:
      summary: Passthrough proxy (PUT)
      description: Fallback route that forwards PUT requests to OpenAI upstream.
      tags: [Passthrough]
      operationId: passthroughPut
    patch:
      summary: Passthrough proxy (PATCH)
      description: Fallback route that forwards PATCH requests to OpenAI upstream.
      tags: [Passthrough]
      operationId: passthroughPatch
    delete:
      summary: Passthrough proxy (DELETE)
      description: Fallback route that forwards DELETE requests to OpenAI upstream.
      tags: [Passthrough]
      operationId: passthroughDelete
